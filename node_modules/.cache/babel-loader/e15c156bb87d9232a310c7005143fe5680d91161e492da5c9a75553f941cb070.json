{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/yeiccie/Documents/work_space/second-hand-mall/manage_code/node_modules/@babel/runtime/helpers/interopRequireDefault.js\")[\"default\"];\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nrequire(\"core-js/modules/es.array.map.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.function.name.js\");\nrequire(\"core-js/modules/es.iterator.constructor.js\");\nrequire(\"core-js/modules/es.iterator.map.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.string.replace.js\");\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _moment = _interopRequireDefault(require(\"moment\"));\nvar _elementPlus = require(\"element-plus\");\nvar _vue = require(\"vue\");\nvar _vueRouter = require(\"vue-router\");\nvar _vuex = require(\"vuex\");\nvar _default = exports[\"default\"] = {\n  __name: 'indexTop',\n  props: {\n    collapse: Boolean\n  },\n  emits: ['collapseChange'],\n  setup: function setup(__props, _ref) {\n    var _getCurrentInstance;\n    var __expose = _ref.expose,\n      __emit = _ref.emit;\n    __expose();\n    var router = (0, _vueRouter.useRouter)();\n    var context = (_getCurrentInstance = (0, _vue.getCurrentInstance)()) === null || _getCurrentInstance === void 0 ? void 0 : _getCurrentInstance.appContext.config.globalProperties;\n    var emit = __emit;\n    var role = context === null || context === void 0 ? void 0 : context.$toolUtil.storageGet('sessionTable');\n    var roleName = context === null || context === void 0 ? void 0 : context.$toolUtil.storageGet('role');\n    var route = (0, _vueRouter.useRoute)();\n    var breadcrumbList = (0, _vue.computed)(function () {\n      var arr = route.matched.map(function (item) {\n        return {\n          name: item.name,\n          path: item.path\n        };\n      });\n      return arr[arr.length - 1].path == '/' ? [arr[0]] : arr;\n    });\n    var props = __props;\n    var _toRefs = (0, _vue.toRefs)(props),\n      collapse = _toRefs.collapse;\n\n    //获取用户信息\n    var store = (0, _vuex.useStore)();\n    var user = (0, _vue.computed)(function () {\n      return store.getters['user/session'];\n    });\n    var avatar = (0, _vue.ref)(store.state.user.avatar);\n    if (!store.state.user.session.id) {\n      store.dispatch('user/getSession');\n    }\n    var toggleClick = function toggleClick() {\n      emit('collapseChange');\n    };\n    // 退出登录\n    var onLogout = function onLogout() {\n      var toolUtil = context === null || context === void 0 ? void 0 : context.$toolUtil;\n      store.dispatch('delAllCachedViews');\n      store.dispatch('delAllVisitedViews');\n      store.dispatch('user/loginOut');\n      toolUtil.storageClear();\n      router.replace({\n        name: \"login\"\n      });\n    };\n    // 个人中心\n    var centerClick = function centerClick() {\n      router.push(\"/\".concat(role, \"Center\"));\n    };\n    // 修改密码\n    var updatepasswordClick = function updatepasswordClick() {\n      router.push(\"/updatepassword\");\n    };\n    var __returned__ = {\n      router: router,\n      context: context,\n      emit: emit,\n      role: role,\n      roleName: roleName,\n      route: route,\n      get breadcrumbList() {\n        return breadcrumbList;\n      },\n      set breadcrumbList(v) {\n        breadcrumbList = v;\n      },\n      props: props,\n      collapse: collapse,\n      store: store,\n      user: user,\n      avatar: avatar,\n      toggleClick: toggleClick,\n      onLogout: onLogout,\n      centerClick: centerClick,\n      updatepasswordClick: updatepasswordClick,\n      get axios() {\n        return _axios[\"default\"];\n      },\n      get moment() {\n        return _moment[\"default\"];\n      },\n      get ElMessageBox() {\n        return _elementPlus.ElMessageBox;\n      },\n      toRefs: _vue.toRefs,\n      getCurrentInstance: _vue.getCurrentInstance,\n      ref: _vue.ref,\n      onBeforeUnmount: _vue.onBeforeUnmount,\n      computed: _vue.computed,\n      get useRouter() {\n        return _vueRouter.useRouter;\n      },\n      get useRoute() {\n        return _vueRouter.useRoute;\n      },\n      get useStore() {\n        return _vuex.useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["_axios","_interopRequireDefault","require","_moment","_elementPlus","_vue","_vueRouter","_vuex","_default","exports","router","useRouter","context","_getCurrentInstance","getCurrentInstance","appContext","config","globalProperties","emit","__emit","role","$toolUtil","storageGet","roleName","route","useRoute","breadcrumbList","computed","arr","matched","map","item","name","path","length","props","__props","_toRefs","toRefs","collapse","store","useStore","user","getters","avatar","ref","state","session","id","dispatch","toggleClick","onLogout","toolUtil","storageClear","replace","centerClick","push","concat","updatepasswordClick"],"sources":["/Users/yeiccie/Documents/work_space/second-hand-mall/manage_code/src/components/index/indexTop.vue"],"sourcesContent":["<template>\r\n\t<div class=\"top_view\">\r\n\t\t<div class=\"top_left_view\">\r\n\t\t\t<div class=\"fold_view\" @click=\"toggleClick\" :class=\"{'is_collapse':collapse}\">\r\n\t\t\t\t<el-icon class=\"icons\">\r\n\t\t\t\t\t<Fold v-if=\"!collapse\" />\r\n\t\t\t\t\t<Expand v-else />\r\n\t\t\t\t</el-icon>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"projectTitle\">Sec Mall </div>\r\n\t\t<div class=\"top_right_view\">\r\n\t\t\t<el-dropdown class=\"avatar-container\" trigger=\"hover\">\r\n\t\t\t\t<div class=\"avatar-wrapper\">\r\n\t\t\t\t\t<div class=\"nickname\">欢迎 {{$toolUtil.storageGet('adminName')}}</div>\r\n\t\t\t\t\t<img class=\"user-avatar\" :src=\"store.getters['user/avatar']\">\r\n\t\t\t\t\t<el-icon class=\"el-icon-arrow-down\">\r\n\t\t\t\t\t\t<arrow-down />\r\n\t\t\t\t\t</el-icon>\r\n\t\t\t\t</div>\r\n\t\t\t\t<template #dropdown>\r\n\t\t\t\t\t<el-dropdown-menu class=\"user-dropDown\" slot=\"dropdown\">\r\n\t\t\t\t\t\t<el-dropdown-item class=\"center\" @click=\"centerClick\" v-if=\"roleName!='管理员'\">\r\n\t\t\t\t\t\t\t个人中心\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item class=\"password\" @click=\"updatepasswordClick\">\r\n\t\t\t\t\t\t\t修改密码\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t<el-dropdown-item class=\"loginOut\">\r\n\t\t\t\t\t\t\t<span style=\"display:block;\" @click=\"onLogout\">退出登录</span>\r\n\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t</el-dropdown-menu>\r\n\t\t\t\t</template>\r\n\t\t\t</el-dropdown>\r\n\t\t</div>\r\n\t</div>\r\n    <div class=\"breadcrumb-view\">\r\n        <el-breadcrumb separator=\"-\">\r\n            <el-breadcrumb-item v-for=\"(item,index) in breadcrumbList\" :key=\"item.path\">\r\n                <i class=\"iconfont icon-zhuye2\" v-if=\"!index\"></i>\r\n                <span @click=\"router.push(item.path)\">{{item.name}}</span>\r\n            </el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n\timport axios from 'axios'\r\n    import moment from \"moment\"\r\n\timport {\r\n\t\tElMessageBox\r\n\t} from 'element-plus'\r\n\timport {\r\n\t\ttoRefs,\r\n\t\tdefineEmits,\r\n\t\tgetCurrentInstance,\r\n\t\tref,\r\n\t\tonBeforeUnmount,\r\n\t\tcomputed,\r\n\t} from 'vue';\r\n\r\n\timport {\r\n\t\tuseRouter,\r\n\t\tuseRoute\r\n\t} from 'vue-router';\r\n\tconst router = useRouter()\r\n\tconst context = getCurrentInstance()?.appContext.config.globalProperties;\r\n\tconst emit = defineEmits(['collapseChange'])\r\n\tconst role = context?.$toolUtil.storageGet('sessionTable')\r\n\tconst roleName = context?.$toolUtil.storageGet('role')\r\n\tconst route = useRoute()\r\n\tlet breadcrumbList = computed(()=>{\r\n\t\tlet arr = route.matched.map(item=>({\r\n\t\t\tname:item.name,\r\n\t\t\tpath:item.path\r\n\t\t}))\r\n\t\treturn arr[arr.length-1].path=='/'?[arr[0]]:arr\r\n\t})\r\n\r\n\tconst props = defineProps({\r\n\t\tcollapse: Boolean\r\n\t})\r\n\tconst {collapse} = toRefs(props)\r\n\r\n\t//获取用户信息\r\n\timport { useStore } from 'vuex'\r\n\tconst store = useStore()\r\n\tconst user = computed(()=>store.getters['user/session'])\r\n\tconst avatar = ref(store.state.user.avatar)\r\n\tif(!store.state.user.session.id){\r\n\t\tstore.dispatch('user/getSession')\r\n\t}\r\n\tconst toggleClick = () => {\r\n\t\temit('collapseChange')\r\n\t}\r\n\t// 退出登录\r\n\tconst onLogout = () => {\r\n\t\tlet toolUtil = context?.$toolUtil\r\n\t\tstore.dispatch('delAllCachedViews')\r\n\t\tstore.dispatch('delAllVisitedViews')\r\n        store.dispatch('user/loginOut')\r\n\t\ttoolUtil.storageClear()\r\n\t\trouter.replace({\r\n\t\t\tname: \"login\"\r\n\t\t});\r\n\t}\r\n\t// 个人中心\r\n\tconst centerClick = () => {\r\n\t\trouter.push(`/${role}Center`)\r\n\t}\r\n\t// 修改密码\r\n\tconst updatepasswordClick = () => {\r\n\t\trouter.push(`/updatepassword`)\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t// 总盒子\r\n\t.top_view {\r\n\t\t// 左边盒子\r\n\t\t.top_left_view {\r\n\t\t\tdisplay: none;\r\n\t\t\t// 折叠按钮盒子\r\n\t\t\t.fold_view {\r\n\t\t\t\t// 图标\r\n\t\t\t\t.icons {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// 标题\r\n\t\t.projectTitle{\r\n\t\t}\r\n\t\t// 右部盒子\r\n\t\t.top_right_view{\r\n\t\t\t// 头像盒子\r\n\t\t\t.avatar-container {\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tmargin: 0 30px 0 0;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\theight: 50px;\r\n\t\t\t\t.avatar-wrapper {\r\n\t\t\t\t\tmargin: 5px 0 0;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t// 昵称\r\n\t\t\t\t\t.nickname {\r\n\t\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\t\tmargin: 0 5px;\r\n\t\t\t\t\t\tline-height: 44px;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 头像\r\n\t\t\t\t\t.user-avatar {\r\n\t\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t\t\tborder-radius: 10px;\r\n\t\t\t\t\t\twidth: 40px;\r\n\t\t\t\t\t\theight: 40px;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 图标\r\n\t\t\t\t\t.el-icon-arrow-down {\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 下拉盒子\r\n\t.el-dropdown-menu{\r\n\t\tbackground: #fff;\r\n\t\t// 下拉盒子itme\r\n\t\t:deep(.el-dropdown-menu__item){\r\n\t\t\tcolor: inherit;\r\n\t\t\tbackground: #fff;\r\n\t\t}\r\n\t\t// item悬浮\r\n\t\t:deep(.el-dropdown-menu__item:hover){\r\n\t\t\tcolor: #fff;\r\n\t\t\tbackground: var(--theme);\r\n\t\t}\r\n\t}\r\n</style>\r\n<style>\r\n/*总盒子*/\r\n.top_view{\r\n    height: 80px;\r\n    width: calc(100% - 17px);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    position: fixed;\r\n    left: 0px;\r\n    top: 0px;\r\n    z-index: 9;\r\n    padding: 0px;\r\n    border-width: 0 0 3px;\r\n    border-style: solid;\r\n    border-color: #c797cf;\r\n    background:#9ed6fc;\r\n    color: #333;\r\n}\r\n/*标题*/\r\n.top_view .projectTitle{\r\n    font-size: 24px;\r\n    margin: 0px;\r\n    padding: 0px 0px 0px 20px;\r\n    line-height: 1;\r\n    font-weight: 600;\r\n    color: inherit;\r\n    order: 1;\r\n    margin-right: auto;\r\n}\r\n\r\n/*左边盒子*/\r\n.top_view .top_left_view{\r\n    width: auto;\r\n    display: none;\r\n    height: 100%;\r\n    align-items: center;\r\n}\r\n/*折叠按钮*/\r\n.top_view .top_left_view .fold_view{\r\n    display: flex;\r\n    padding: 0px;\r\n    margin: 0px 0px 0px 222px;\r\n    background: rgb(139, 92, 126);\r\n    border-radius: 50%;\r\n    width: 32px;\r\n    height: 32px;\r\n    align-items: center;\r\n    justify-content: center;\r\n }\r\n.top_view .top_left_view .fold_view:hover {\r\n    background:#fa9fa4;\r\n }\r\n/*图标*/\r\n.top_view .top_left_view .fold_view .icons{\r\n    font-size: 24px;\r\n    color: inherit;\r\n}\r\n\r\n/*系统公告*/\r\n.top_view .notice-btn{\r\n    padding: 0 16px;\r\n    margin-right:20px;\r\n    line-height: 50px;\r\n    font-size: 14px;\r\n    color: inherit;\r\n    order: 3;\r\n    height: 100%;\r\n    border: none;\r\n    background: none;\r\n    color: inherit;\r\n}\r\n.top_view .notice-btn:hover{\r\n    color: inherit;\r\n}\r\n.top_view .notice-btn .iconfont{\r\n    font-size: 16px;\r\n}\r\n\r\n/*右边盒子 横排*/\r\n.top_view .top_right_view{\r\n    width: auto;\r\n    height: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n    order: 4;\r\n    margin-right: 30px;\r\n    padding-left: 20px;\r\n }\r\n.top_view .top_right_view .actionBar{ }\r\n.top_view .top_right_view .actionBar .item { float:left; margin-right:20px; margin-bottom:5px; font-size:16px; color:#8b5c7e; font-weight:500;  }\r\n.top_view .top_right_view .actionBar .item:hover {   color: inherit; cursor:pointer;  }\r\n.top_view .top_right_view .actionBar .item i { font-size:18px; }\r\n\r\n.top_view .user-info{\r\n    position:absolute;\r\n    left:20px;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.top_view .user-info .img-wrapper{\r\n    margin-right:10px;\r\n}\r\n.top_view .user-info .img-wrapper .user-avatar{\r\n    width:50px;\r\n}\r\n.top_view .user-info .nickname{\r\n    font-size:16px;\r\n    color:#333 !important;\r\n}\r\n\r\n.top_view .weather {\r\n    order: 2;\r\n    display: flex;\r\n    white-space: nowrap;\r\n    line-height: 80px;\r\n    column-gap: 4px;\r\n    padding-left: 20px;\r\n    color: inherit;\r\n}\r\n\r\n.top_view img.user-avatar {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n}\r\n\r\n.top_view .avatar-wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.top_view .nickname {\r\n    white-space: nowrap;\r\n    margin-right: 6px;\r\n    color:#333 !important;\r\n}\r\n\r\n.top_view .nowDate {\r\n    order: 2;\r\n    white-space: nowrap;\r\n    margin: 0 20px;\r\n    padding-left: 20px;\r\n    line-height: 80px;\r\n    color: inherit;\r\n}\r\n\r\n.breadcrumb-view {\r\n    display:block;\r\n    background:linear-gradient(180deg, rgba(233,247,255,1) 0%, rgba(139,199,239,1) 50%, rgba(109,188,241,1) 50%, rgba(142,201,240,1) 100%);\r\n    width: calc(100% - 70px) !important;\r\n    height: 38px;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0 20px;\r\n    margin-left:40px;\r\n}\r\n.el-breadcrumb {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 38px;\r\n}\r\n/*分割线*/\r\n.breadcrumb-view .el-breadcrumb__separator{\r\n    color: #07487f;\r\n}\r\n.breadcrumb-view .el-breadcrumb__inner{\r\n    color: #07487f !important;\r\n}\r\n.breadcrumb-view .el-breadcrumb__inner:hover{\r\n    color: #07487f;\r\n}\r\n\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}