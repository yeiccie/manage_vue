{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\nvar _interopRequireDefault = require(\"/Users/yeiccie/Documents/work_space/second-hand-mall/manage_code/node_modules/@babel/runtime/helpers/interopRequireDefault.js\")[\"default\"];\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _index = _interopRequireDefault(require(\"../router/index\"));\nvar _toolUtil = _interopRequireDefault(require(\"@/utils/toolUtil\"));\nvar _config = _interopRequireDefault(require(\"@/utils/config\"));\nvar _elementPlus = require(\"element-plus\");\nvar http = _axios[\"default\"].create({\n  timeout: 1000 * 86400,\n  withCredentials: true,\n  baseURL: process.env.VUE_APP_BASE_API,\n  headers: {\n    'Content-Type': 'application/json; charset=utf-8'\n  }\n});\n// 请求拦截\nhttp.interceptors.request.use(function (config) {\n  config.headers['Token'] = _toolUtil[\"default\"].storageGet('Token'); // 请求头带上token\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\n// 响应拦截\nhttp.interceptors.response.use(function (response) {\n  if (response.data && response.data.code == 401) {\n    // 401, token失效\n    _toolUtil[\"default\"].storageClear();\n    _elementPlus.ElMessage.error({\n      message: response.data.msg,\n      grouping: true,\n      repeatNum: -99\n    });\n    _index[\"default\"].push('/login');\n    return Promise.reject(response);\n  } else if (response.data && response.data.code == 0) {\n    return response;\n  } else {\n    _elementPlus.ElMessage.error({\n      message: response.data.msg,\n      grouping: true,\n      repeatNum: -99\n    });\n    return Promise.reject(response);\n  }\n}, function (error) {\n  return Promise.reject(error);\n});\nvar _default = exports[\"default\"] = http;","map":{"version":3,"names":["_axios","_interopRequireDefault","require","_index","_toolUtil","_config","_elementPlus","http","axios","create","timeout","withCredentials","baseURL","process","env","VUE_APP_BASE_API","headers","interceptors","request","use","config","toolUtil","storageGet","error","Promise","reject","response","data","code","storageClear","ElMessage","message","msg","grouping","repeatNum","router","push","_default","exports"],"sources":["/Users/yeiccie/Documents/work_space/second-hand-mall/manage_code/src/utils/http.js"],"sourcesContent":["import axios from 'axios'\r\nimport router from '../router/index'\r\nimport toolUtil from '@/utils/toolUtil'\r\nimport config from '@/utils/config'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nconst http = axios.create({\r\n    timeout: 1000 * 86400,\r\n    withCredentials: true,\r\n    baseURL: process.env.VUE_APP_BASE_API,\r\n    headers: {\r\n        'Content-Type': 'application/json; charset=utf-8'\r\n    }\r\n})\r\n// 请求拦截\r\nhttp.interceptors.request.use(config => {\r\n    config.headers['Token'] = toolUtil.storageGet('Token') // 请求头带上token\r\n    return config\r\n}, error => {\r\n    return Promise.reject(error)\r\n})\r\n// 响应拦截\r\nhttp.interceptors.response.use(response => {\r\n    if (response.data && response.data.code == 401) { // 401, token失效\r\n\t\ttoolUtil.storageClear()\r\n\t\tElMessage.error({\r\n            message:response.data.msg,\r\n            grouping:true,\r\n            repeatNum:-99,\r\n        })\r\n        router.push('/login')\r\n\t\treturn Promise.reject(response)\r\n    }\r\n\telse if(response.data && response.data.code == 0){\r\n\t\treturn response\r\n\t}else{\r\n\t\tElMessage.error({\r\n            message:response.data.msg,\r\n            grouping:true,\r\n            repeatNum:-99,\r\n        })\r\n\t\treturn Promise.reject(response)\r\n\t}\r\n    \r\n}, error => {\r\n    return Promise.reject(error)\r\n})\r\nexport default http"],"mappings":";;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,SAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,OAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,YAAA,GAAAJ,OAAA;AAEA,IAAMK,IAAI,GAAGC,iBAAK,CAACC,MAAM,CAAC;EACtBC,OAAO,EAAE,IAAI,GAAG,KAAK;EACrBC,eAAe,EAAE,IAAI;EACrBC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,gBAAgB;EACrCC,OAAO,EAAE;IACL,cAAc,EAAE;EACpB;AACJ,CAAC,CAAC;AACF;AACAT,IAAI,CAACU,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,UAAAC,MAAM,EAAI;EACpCA,MAAM,CAACJ,OAAO,CAAC,OAAO,CAAC,GAAGK,oBAAQ,CAACC,UAAU,CAAC,OAAO,CAAC,EAAC;EACvD,OAAOF,MAAM;AACjB,CAAC,EAAE,UAAAG,KAAK,EAAI;EACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CAAC;AACF;AACAhB,IAAI,CAACU,YAAY,CAACS,QAAQ,CAACP,GAAG,CAAC,UAAAO,QAAQ,EAAI;EACvC,IAAIA,QAAQ,CAACC,IAAI,IAAID,QAAQ,CAACC,IAAI,CAACC,IAAI,IAAI,GAAG,EAAE;IAAE;IACpDP,oBAAQ,CAACQ,YAAY,CAAC,CAAC;IACvBC,sBAAS,CAACP,KAAK,CAAC;MACNQ,OAAO,EAACL,QAAQ,CAACC,IAAI,CAACK,GAAG;MACzBC,QAAQ,EAAC,IAAI;MACbC,SAAS,EAAC,CAAC;IACf,CAAC,CAAC;IACFC,iBAAM,CAACC,IAAI,CAAC,QAAQ,CAAC;IAC3B,OAAOZ,OAAO,CAACC,MAAM,CAACC,QAAQ,CAAC;EAC7B,CAAC,MACC,IAAGA,QAAQ,CAACC,IAAI,IAAID,QAAQ,CAACC,IAAI,CAACC,IAAI,IAAI,CAAC,EAAC;IAChD,OAAOF,QAAQ;EAChB,CAAC,MAAI;IACJI,sBAAS,CAACP,KAAK,CAAC;MACNQ,OAAO,EAACL,QAAQ,CAACC,IAAI,CAACK,GAAG;MACzBC,QAAQ,EAAC,IAAI;MACbC,SAAS,EAAC,CAAC;IACf,CAAC,CAAC;IACR,OAAOV,OAAO,CAACC,MAAM,CAACC,QAAQ,CAAC;EAChC;AAED,CAAC,EAAE,UAAAH,KAAK,EAAI;EACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CAAC;AAAA,IAAAc,QAAA,GAAAC,OAAA,cACa/B,IAAI","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}