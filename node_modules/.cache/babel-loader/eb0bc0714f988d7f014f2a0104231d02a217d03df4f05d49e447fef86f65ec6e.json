{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nrequire(\"core-js/modules/es.date.to-json.js\");\nrequire(\"core-js/modules/es.json.stringify.js\");\nrequire(\"core-js/modules/es.object.define-property.js\");\nrequire(\"core-js/modules/es.object.keys.js\");\nvar _vue = require(\"vue\");\nvar _default = exports[\"default\"] = {\n  __name: 'approval',\n  props: {\n    tableName: String\n  },\n  emits: ['shChange'],\n  setup: function setup(__props, _ref) {\n    var _getCurrentInstance;\n    var __expose = _ref.expose,\n      __emit = _ref.emit;\n    var emit = __emit;\n    var context = (_getCurrentInstance = (0, _vue.getCurrentInstance)()) === null || _getCurrentInstance === void 0 ? void 0 : _getCurrentInstance.appContext.config.globalProperties;\n    //props\n    var props = __props;\n    var _toRefs = (0, _vue.toRefs)(props),\n      tableName = _toRefs.tableName;\n    //props\n\n    var rules = (0, _vue.ref)({\n      shhf: [{\n        required: true,\n        message: '请输入审核回复',\n        trigger: 'blur'\n      }]\n    });\n    var approvalForm = (0, _vue.ref)({});\n    var approvalVisible = (0, _vue.ref)(false);\n    //ref\n    var ruleFormRef = (0, _vue.ref)(null);\n    var sfshType = (0, _vue.ref)(1);\n    var approvalClick = function approvalClick(row) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      sfshType.value = type;\n      approvalForm.value = JSON.parse(JSON.stringify(row));\n      approvalVisible.value = true;\n    };\n\n    //声明父级调用\n    __expose({\n      approvalClick: approvalClick\n    });\n    var approvalSave = function approvalSave(type) {\n      if (sfshType.value == 1) {\n        approvalForm.value.sfsh = type;\n      }\n      ruleFormRef.value.validate(function (valid) {\n        if (valid) {\n          var url = \"\".concat(tableName.value, \"/update\");\n          context === null || context === void 0 || context.$http({\n            url: url,\n            method: 'post',\n            data: approvalForm.value\n          }).then(function (res) {\n            context === null || context === void 0 || context.$toolUtil.message('审核成功', 'success', function (obj) {\n              approvalVisible.value = false;\n            });\n            emit('shChange', type, approvalForm.value);\n          });\n        }\n      });\n    };\n    var __returned__ = {\n      emit: emit,\n      context: context,\n      props: props,\n      tableName: tableName,\n      rules: rules,\n      approvalForm: approvalForm,\n      approvalVisible: approvalVisible,\n      ruleFormRef: ruleFormRef,\n      sfshType: sfshType,\n      approvalClick: approvalClick,\n      approvalSave: approvalSave,\n      ref: _vue.ref,\n      toRefs: _vue.toRefs,\n      getCurrentInstance: _vue.getCurrentInstance\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["_vue","require","_default","exports","emit","__emit","context","_getCurrentInstance","getCurrentInstance","appContext","config","globalProperties","props","__props","_toRefs","toRefs","tableName","rules","ref","shhf","required","message","trigger","approvalForm","approvalVisible","ruleFormRef","sfshType","approvalClick","row","type","arguments","length","undefined","value","JSON","parse","stringify","__expose","approvalSave","sfsh","validate","valid","url","concat","$http","method","data","then","res","$toolUtil","obj"],"sources":["/Users/yeiccie/Documents/work_space/second-hand-mall/manage_code/src/components/common/approval.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-dialog class=\"edit_form\" v-model=\"approvalVisible\" :title=\"'审核'\" width=\"70%\" destroy-on-close>\r\n\t\t\t<el-form ref=\"ruleFormRef\" :model=\"approvalForm\" label-width=\"120px\" :rules=\"rules\">\r\n\t\t\t\t<el-row>\r\n\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t<el-form-item label=\"审核回复\" prop=\"shhf\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"approvalForm.shhf\" type=\"textarea\" />\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\r\n\t\t\t\t</el-row>\r\n\t\t\t</el-form>\r\n\t\t\t<template #footer>\r\n\t\t\t\t<span class=\"dialog-footer\" v-if=\"sfshType==1\">\r\n\t\t\t\t\t<el-button type=\"danger\" @click=\"approvalSave('否')\">拒绝</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"approvalSave('是')\">\r\n\t\t\t\t\t\t通过\r\n\t\t\t\t\t</el-button>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"dialog-footer\" v-if=\"sfshType==2\">\r\n\t\t\t\t\t<el-button type=\"danger\" @click=\"approvalVisible=false\">取消</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"approvalSave()\">\r\n\t\t\t\t\t\t回复\r\n\t\t\t\t\t</el-button>\r\n\t\t\t\t</span>\r\n\t\t\t</template>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\ttoRefs,\r\n\t\tgetCurrentInstance,\r\n\t\tdefineEmits\r\n\t} from 'vue';\r\n\tconst emit = defineEmits(['shChange'])\r\n\tconst context = getCurrentInstance()?.appContext.config.globalProperties;\r\n\t//props\r\n\tconst props = defineProps({\r\n\t\ttableName: String\r\n\t})\r\n\tconst {\r\n\t\ttableName\r\n\t} = toRefs(props)\r\n\t//props\r\n\r\n\tconst rules = ref({\r\n\t\tshhf: [{\r\n\t\t\trequired: true,\r\n\t\t\tmessage: '请输入审核回复',\r\n\t\t\ttrigger: 'blur'\r\n\t\t}, ],\r\n\t})\r\n\tconst approvalForm = ref({})\r\n\tconst approvalVisible = ref(false)\r\n\t//ref\r\n\tconst ruleFormRef = ref(null)\r\n\tconst sfshType = ref(1)\r\n\r\n\tconst approvalClick = (row,type=1) => {\r\n\t\tsfshType.value = type\r\n\t\tapprovalForm.value = JSON.parse(JSON.stringify(row))\r\n\t\tapprovalVisible.value = true\r\n\t}\r\n\r\n\t//声明父级调用\r\n\tdefineExpose({\r\n\t\tapprovalClick\r\n\t})\r\n\tconst approvalSave = (type) => {\r\n\t\tif(sfshType.value == 1){\r\n\t\t\tapprovalForm.value.sfsh = type\r\n\t\t}\r\n\t\truleFormRef.value.validate((valid) => {\r\n\t\t\tif (valid) {\r\n\t\t\t\tlet url = `${tableName.value}/update`\r\n\t\t\t\tcontext?.$http({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\tdata: approvalForm.value\r\n\t\t\t\t}).then(res => {\r\n\r\n\t\t\t\t\tcontext?.$toolUtil.message('审核成功', 'success', obj => {\r\n\t\t\t\t\t\tapprovalVisible.value = false\r\n\t\t\t\t\t})\r\n\t\t\t\t\temit('shChange',type,approvalForm.value)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"],"mappings":";;;;;;;;;;AAgCC,IAAAA,IAAA,GAAAC,OAAA;AAKa,IAAAC,QAAA,GAAAC,OAAA,c;;;;;;;;;;IACb,IAAMC,IAAI,GAAGC,MAAyB;IACtC,IAAMC,OAAO,IAAAC,mBAAA,GAAG,IAAAC,uBAAkB,EAAC,CAAC,cAAAD,mBAAA,uBAApBA,mBAAA,CAAsBE,UAAU,CAACC,MAAM,CAACC,gBAAgB;IACxE;IACA,IAAMC,KAAK,GAAGC,OAEZ;IACF,IAAAC,OAAA,GAEI,IAAAC,WAAM,EAACH,KAAK,CAAC;MADhBI,SAAS,GAAAF,OAAA,CAATE,SAAS;IAEV;;IAEA,IAAMC,KAAK,GAAG,IAAAC,QAAG,EAAC;MACjBC,IAAI,EAAE,CAAC;QACNC,QAAQ,EAAE,IAAI;QACdC,OAAO,EAAE,SAAS;QAClBC,OAAO,EAAE;MACV,CAAC;IACF,CAAC,CAAC;IACF,IAAMC,YAAY,GAAG,IAAAL,QAAG,EAAC,CAAC,CAAC,CAAC;IAC5B,IAAMM,eAAe,GAAG,IAAAN,QAAG,EAAC,KAAK,CAAC;IAClC;IACA,IAAMO,WAAW,GAAG,IAAAP,QAAG,EAAC,IAAI,CAAC;IAC7B,IAAMQ,QAAQ,GAAG,IAAAR,QAAG,EAAC,CAAC,CAAC;IAEvB,IAAMS,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,GAAG,EAAY;MAAA,IAAXC,IAAI,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC;MAChCJ,QAAQ,CAACO,KAAK,GAAGJ,IAAI;MACrBN,YAAY,CAACU,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACR,GAAG,CAAC,CAAC;MACpDJ,eAAe,CAACS,KAAK,GAAG,IAAI;IAC7B,CAAC;;IAED;IACAI,QAAY,CAAC;MACZV,aAAa,EAAbA;IACD,CAAC,CAAC;IACF,IAAMW,YAAY,GAAG,SAAfA,YAAYA,CAAIT,IAAI,EAAK;MAC9B,IAAGH,QAAQ,CAACO,KAAK,IAAI,CAAC,EAAC;QACtBV,YAAY,CAACU,KAAK,CAACM,IAAI,GAAGV,IAAI;MAC/B;MACAJ,WAAW,CAACQ,KAAK,CAACO,QAAQ,CAAC,UAACC,KAAK,EAAK;QACrC,IAAIA,KAAK,EAAE;UACV,IAAIC,GAAG,MAAAC,MAAA,CAAM3B,SAAS,CAACiB,KAAK,YAAS;UACrC3B,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEsC,KAAK,CAAC;YACdF,GAAG,EAAEA,GAAG;YACRG,MAAM,EAAE,MAAM;YACdC,IAAI,EAAEvB,YAAY,CAACU;UACpB,CAAC,CAAC,CAACc,IAAI,CAAC,UAAAC,GAAG,EAAI;YAEd1C,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAE2C,SAAS,CAAC5B,OAAO,CAAC,MAAM,EAAE,SAAS,EAAE,UAAA6B,GAAG,EAAI;cACpD1B,eAAe,CAACS,KAAK,GAAG,KAAK;YAC9B,CAAC,CAAC;YACF7B,IAAI,CAAC,UAAU,EAACyB,IAAI,EAACN,YAAY,CAACU,KAAK,CAAC;UACzC,CAAC,CAAC;QACH;MACD,CAAC,CAAC;IACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}